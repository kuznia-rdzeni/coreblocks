<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>coreblocks.priv.traps package &mdash; Coreblocks documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
        <script>mermaid.initialize({startOnLoad:true});</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="coreblocks.scheduler package" href="coreblocks.scheduler.html" />
    <link rel="prev" title="coreblocks.priv.csr package" href="coreblocks.priv.csr.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Coreblocks documentation
            <img src="_static/logo-banner.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="home.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="assumptions.html">List of assumptions made during development</a></li>
<li class="toctree-l1"><a class="reference internal" href="development-environment.html">Development environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="scheduler/overview.html">Scheduler overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared-structs/implementation/rs-impl.html">Proposition of Reservation Station implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared-structs/rs.html">Reservation Station</a></li>
<li class="toctree-l1"><a class="reference internal" href="current-graph.html">Full transaction-method graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="problem-checklist.html">Problem checklist</a></li>
<li class="toctree-l1"><a class="reference internal" href="synthesis/synthesis.html">Core verification</a></li>
<li class="toctree-l1"><a class="reference internal" href="components/icache.html">Instruction Cache</a></li>
<li class="toctree-l1"><a class="reference internal" href="miscellany/exceptions-summary.html">Summary of papers about interrupts</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Coreblocks documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="api.html">API</a> &raquo;</li>
          <li><a href="coreblocks.html">coreblocks package</a> &raquo;</li>
          <li><a href="coreblocks.priv.html">coreblocks.priv package</a> &raquo;</li>
      <li>coreblocks.priv.traps package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/coreblocks.priv.traps.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="coreblocks-priv-traps-package">
<h1>coreblocks.priv.traps package<a class="headerlink" href="#coreblocks-priv-traps-package" title="Permalink to this heading"></a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this heading"></a></h2>
</div>
<div class="section" id="module-coreblocks.priv.traps.exception">
<span id="coreblocks-priv-traps-exception-module"></span><h2>coreblocks.priv.traps.exception module<a class="headerlink" href="#module-coreblocks.priv.traps.exception" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.priv.traps.exception.ExceptionInformationRegister">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.priv.traps.exception.</span></span><span class="sig-name descname"><span class="pre">ExceptionInformationRegister</span></span><a class="headerlink" href="#coreblocks.priv.traps.exception.ExceptionInformationRegister" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>ExceptionInformationRegister</p>
<p>Stores parameters of earliest (in instruction order) exception, to save resources in the <cite>ReorderBuffer</cite>.
All FUs that report exceptions should <cite>report</cite> the details to <cite>ExceptionCauseRegister</cite> and set <cite>exception</cite> bit in
result data. Exception order is computed in this module. Only one exception can be reported for single instruction,
exception priorities should be computed locally before calling report.
If <cite>exception</cite> bit is set in the ROB, <cite>Retirement</cite> stage fetches exception details from this module.</p>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.priv.traps.exception.ExceptionInformationRegister.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gen_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="coreblocks.params.html#coreblocks.params.genparams.GenParams" title="coreblocks.params.genparams.GenParams"><span class="pre">GenParams</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">rob_get_indices</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Method</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fetch_stall_exception</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Method</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.priv.traps.exception.ExceptionInformationRegister.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="coreblocks.priv.traps.exception.should_update_prioriy">
<span class="sig-prename descclassname"><span class="pre">coreblocks.priv.traps.exception.</span></span><span class="sig-name descname"><span class="pre">should_update_prioriy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">m</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">TModule</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_cause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://amaranth-lang.org/docs/amaranth/latest/reference.html#amaranth.hdl.Value" title="(in Amaranth language &amp; toolchain v0.6.0.dev72)"><span class="pre">Value</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">new_cause</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://amaranth-lang.org/docs/amaranth/latest/reference.html#amaranth.hdl.Value" title="(in Amaranth language &amp; toolchain v0.6.0.dev72)"><span class="pre">Value</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><a class="reference external" href="https://amaranth-lang.org/docs/amaranth/latest/reference.html#amaranth.hdl.Value" title="(in Amaranth language &amp; toolchain v0.6.0.dev72)"><span class="pre">Value</span></a></span></span><a class="headerlink" href="#coreblocks.priv.traps.exception.should_update_prioriy" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-coreblocks.priv.traps.instr_counter">
<span id="coreblocks-priv-traps-instr-counter-module"></span><h2>coreblocks.priv.traps.instr_counter module<a class="headerlink" href="#module-coreblocks.priv.traps.instr_counter" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.priv.traps.instr_counter.CoreInstructionCounter">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.priv.traps.instr_counter.</span></span><span class="sig-name descname"><span class="pre">CoreInstructionCounter</span></span><a class="headerlink" href="#coreblocks.priv.traps.instr_counter.CoreInstructionCounter" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">Elaboratable</span></code></p>
<p>Counts instructions currently processed in core.
Used in exception handling, to wait for core flush to finish.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>increment</strong><span class="classifier">Method</span></dt><dd><p>Increments the counter. Should be called when new instruction leaves fetch stage.</p>
</dd>
<dt><strong>decrement</strong><span class="classifier">Method</span></dt><dd><p>Decrements the counter, and returns if the counter will be equal to zero after that cycle (it was the
last instruction in core and no new instruction is fetched). Should be called when instruction is retired.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.priv.traps.instr_counter.CoreInstructionCounter.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gen_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="coreblocks.params.html#coreblocks.params.genparams.GenParams" title="coreblocks.params.genparams.GenParams"><span class="pre">GenParams</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.priv.traps.instr_counter.CoreInstructionCounter.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-coreblocks.priv.traps.interrupt_controller">
<span id="coreblocks-priv-traps-interrupt-controller-module"></span><h2>coreblocks.priv.traps.interrupt_controller module<a class="headerlink" href="#module-coreblocks.priv.traps.interrupt_controller" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="coreblocks.priv.traps.interrupt_controller.InternalInterruptController">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">coreblocks.priv.traps.interrupt_controller.</span></span><span class="sig-name descname"><span class="pre">InternalInterruptController</span></span><a class="headerlink" href="#coreblocks.priv.traps.interrupt_controller.InternalInterruptController" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://amaranth-lang.org/docs/amaranth/latest/stdlib/wiring.html#amaranth.lib.wiring.Component" title="(in Amaranth language &amp; toolchain v0.6.0.dev72)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Component</span></code></a></p>
<p>Core Internal Interrupt Controller
Compatible with RISC-V privileged specification.
Operates on CSR registers xIE, xIP, and parts of xSTATUS.
Interrups are reported via plain signals in Component interface.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>internal_report_level: In, 16</strong></dt><dd><p>Level-triggered input for interrupts with numbers 0-15, assigned by spec for standard interrupts (internal use)</p>
</dd>
<dt><strong>custom_report: In, interrupt_custom_count</strong></dt><dd><p>Input for reporting custom/local interrupts starting with number 16.
Each custom interrupt can be either level-triggered or edge-triggered, configured by <cite>CoreConfigration</cite>.
See <cite>interrupt_custom_count</cite> and <cite>interrupt_custom_edge_trig_mask</cite> in <cite>CoreConfigration</cite>.</p>
</dd>
<dt><strong>interrupt_insert: Out, 1</strong></dt><dd><p>Internal interface, signals pending interrupt.</p>
</dd>
<dt><strong>entry: Method</strong></dt><dd><p>Internal interface, changes state to interrupt handler entry.</p>
</dd>
<dt><strong>mret: Method</strong></dt><dd><p>Internal interface, changes state to interrupt handler exit.</p>
</dd>
<dt><strong>interrupt_cause: Method</strong></dt><dd><p>Internal interface, provides number of the most prioritized interrupt that caused current interrupt insertion.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="coreblocks.priv.traps.interrupt_controller.InternalInterruptController.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gen_params</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="coreblocks.params.html#coreblocks.params.genparams.GenParams" title="coreblocks.params.genparams.GenParams"><span class="pre">GenParams</span></a></span></em><span class="sig-paren">)</span><a class="headerlink" href="#coreblocks.priv.traps.interrupt_controller.InternalInterruptController.__init__" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.priv.traps.interrupt_controller.InternalInterruptController.custom_report">
<span class="sig-name descname"><span class="pre">custom_report</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Signal</span></em><a class="headerlink" href="#coreblocks.priv.traps.interrupt_controller.InternalInterruptController.custom_report" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="coreblocks.priv.traps.interrupt_controller.InternalInterruptController.internal_report_level">
<span class="sig-name descname"><span class="pre">internal_report_level</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Signal</span></em><a class="headerlink" href="#coreblocks.priv.traps.interrupt_controller.InternalInterruptController.internal_report_level" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-coreblocks.priv.traps">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-coreblocks.priv.traps" title="Permalink to this heading"></a></h2>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="coreblocks.priv.csr.html" class="btn btn-neutral float-left" title="coreblocks.priv.csr package" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="coreblocks.scheduler.html" class="btn btn-neutral float-right" title="coreblocks.scheduler package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright Kuźnia Rdzeni, 2025.
      <span class="lastupdated">Last updated on 10:13 2025-01-21.
      </span></p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>